<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <link rel="stylesheet" href="./styles/app.css">
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  </head>
  <body>
    <h1>Loading...</h1>

    <script>
      (async () => {
        const liffID = "2004166882-p8e0rDvx";
        await liff.init({ liffId: liffID });
        const user_info = await liff.getDecodedIDToken();
        await google.script.run.saveLineU(user_info);

        const redirect = new URL(location).searchParams.get("redirect");
        if (typeof redirect === "string")
          location.href = new URL(redirect, location).href;
      })();
    </script>

    <script>
      const liffID = "2004166882-p8e0rDvx";
      liff
        .init({
          liffId: liffID,
        })
        .then(function () {
          const lineInfo = liff.getDecodedIDToken();
          google.script.run.saveLineInfo(lineInfo);

          const hash = locastion ? location.hash : "";
          const redirect = "https://liff.line.me/2004166882-LQykb3Mm" + hash;

          location.href = redirect;
        })
        .catch(function (error) {
          alert("Error " + error);
        });


        JSON.stringify
    </script>
  </body>
</html>
